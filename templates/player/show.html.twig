{% extends 'base.html.twig' %}

{% block title %}{{ player.prenom }} {{ player.nom }}{% endblock %}


{% block body %}
<h1>{{ player.prenom }} {{ player.nom }}</h1>

<div class="player-detail">
    <div class="player-photo">{{ player.prenom|first }}{{ player.nom|first }}</div>
    <div class="player-info-detail">
        <p><strong>Date de naissance:</strong> {{ player.dateNaissance|date('d/m/Y') }}</p>
        <p><strong>Catégorie:</strong> {{ player.category ? player.category.nom : 'Non défini' }}</p>
        <p><strong>Niveau:</strong> {{ player.level ? player.level.nom : 'Non défini' }}</p>
        <p><strong>Note moyenne:</strong> ⭐ {{ player.averageRating }}/5</p>
    </div>
</div>

<div class="review-section">
    <h2>Avis ({{ player.reviews|length }})</h2>

    {% if is_granted('ROLE_USER') %}
    <a href="{{ path('review_new', {id: player.id}) }}" class="btn">Laisser un avis</a>
    {% else %}
    <p><a href="{{ path('app_login') }}" class="btn">Connectez-vous pour laisser un avis</a></p>
    {% endif %}

    <div class="review-list">
        {% for review in player.reviews %}
        <div class="review-item">
            <div class="review-header">
                <span class="review-author">{{ review.user.prenom }} {{ review.user.nom }}</span>
                <span class="review-date">{{ review.dateCreation|date('d/m/Y') }}</span>
            </div>
            <div class="review-rating">{{ review.note }}/5</div>
            <p class="review-comment">{{ review.commentaire }}</p>
        </div>
        {% else %}
        <p>Aucun avis pour le moment.</p>
        {% endfor %}
    </div>
</div>

<a href="{{ path('home') }}" class="back-link">← Retour à l'accueil</a>
{% endblock %}
